<!DOCTYPE html>

<html>
<head>
<title>Upgrade</title>
<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="style.css" />
<script src="shared.js"></script>
<script src="update.js"></script>
</head>
<body onload="init();">

<fieldset>
	<legend>Routerdetails</legend>
	<div><label>Modell: </label><span id="model">?</span></div>
	<div><label>Firmware Version: </label><span id="firmware_version">?</span></div>
</fieldset>
<fieldset>
	<legend>Aktuelle Firmware suchen</legend>
	<div>
		<button type="button" class="button blue sharp" onclick="lookup_upgrade()">Suchen</button>
		<button type="button" class="button blue sharp" onclick="lookup_and_apply_upgrade()">Suchen und Aktualisieren</button>
	</div>
	<p>Die <a href="https://ffbsee.de/">Freifunk Bodensee-Community</a> bietet neue Firmware-Versionen f√ºr diesen Router an. Es ist ratsam immer die aktuellste Version zu installieren, um von Fehlerbereinigungen und neue Funktionen zu profitieren.</p>
</fieldset>
<fieldset>
	<legend>Router zur&#252;cksetzen</legend>
	<div>
		<button type="button" class="button red sharp" onclick="restore_firmware()">Zur&#252;cksetzen</button>
	</div>
	<p>Alle Einstellungen werden zur&#252;ckgesetzt und der Router startet neu.</p>
</fieldset>
<fieldset>
	<legend>Manuelles Update</legend>
	<div id="selected_image"></div>
	<form action="/cgi-bin/upgrade" enctype="multipart/form-data" method="post">
	<div class="radio_option_upgrade">
		<input type="checkbox" id="keep_config" name="keep_config" value="yes" checked>
		Konfiguration beibehalten
	</div>	
	<label>
		<input type="file" id="import_file" name="firmware" onchange="$('selected_image').innerHTML=this.value.replace(/^.*[\\\/](.*)$/, '$1');" style="visibility:hidden;position:absolute;top:-50;left:-50"/>
		<input type="hidden" name="func" value="apply_firmware" />
		<button type="button" class="button blue sharp" onclick="$('import_file').click()">Image Ausw&auml;hlen</button>
		<button type="submit" class="button red sharp" >Update</button>
	</label>
	</form>
	<p>Hier kann ein Freifunk-Image (Dateiname endet auf "*-sysupgrade.bin") oder die Firmware des Routerherstellers verwendet werden.</p>
</fieldset>

</body>
</html>
